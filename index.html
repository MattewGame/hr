<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Resume Analyzer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--secondary-color);
        }
        
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .output-section {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            border-bottom: 2px solid var(--light-color);
            padding-bottom: 10px;
        }
        
        textarea {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #95a5a6;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--secondary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .result-container {
            background-color: var(--light-color);
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .result-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .result-content {
            color: var(--dark-color);
        }
        
        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }
        
        .file-upload {
            margin-bottom: 15px;
        }
        
        .file-upload-label {
            display: inline-block;
            background-color: var(--light-color);
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .file-upload-label:hover {
            background-color: #d5dbdb;
        }
        
        #file-input, #pdf-input {
            display: none;
        }
        
        .notification {
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
        
        .notification.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .notification.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .api-status {
            background-color: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .file-info {
            background-color: #e8f4fd;
            padding: 10px 15px;
            border-radius: 4px;
            margin: 10px 0;
            display: none;
        }
        
        .pdf-preview {
            background-color: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
            display: none;
        }
        
        .pdf-preview.active {
            display: block;
        }
        
        .pdf-icon {
            font-size: 48px;
            color: #e74c3c;
            margin-bottom: 10px;
        }
        
        .upload-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .file-stats {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">HR Resume Analyzer</div>
            <nav>
                <ul>
                    <li><a href="#analyze">–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—é–º–µ</a></li>
                    <li><a href="#features">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a></li>
                    <li><a href="#about">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <section class="hero">
        <div class="container">
            <h1>–£–ø—Ä–æ—Å—Ç–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∑—é–º–µ</h1>
            <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ä–µ–∑—é–º–µ: –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã, –Ω–∞–≤—ã–∫–∏ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ</p>
        </div>
    </section>
    
    <div class="container">
        <div class="api-status">
            ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å YandexGPT | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF –∏ TXT —Ñ–∞–π–ª–æ–≤
        </div>
        
        <section id="analyze" class="main-content">
            <div class="input-section">
                <h2 class="section-title">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ–∑—é–º–µ</h2>
                
                <div class="upload-options">
                    <label for="pdf-input" class="file-upload-label">
                        üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å PDF
                    </label>
                    <label for="file-input" class="file-upload-label">
                        üìù –ó–∞–≥—Ä—É–∑–∏—Ç—å TXT
                    </label>
                    <button id="clear-all" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                </div>
                
                <input type="file" id="pdf-input" accept=".pdf">
                <input type="file" id="file-input" accept=".txt">
                
                <div class="pdf-preview" id="pdf-preview">
                    <div class="pdf-icon">üìÑ</div>
                    <h3>PDF –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω</h3>
                    <p id="pdf-info">–ò–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞...</p>
                    <div class="loading" id="pdf-loading">
                        <div class="spinner"></div>
                        <p>–ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ PDF...</p>
                    </div>
                </div>
                
                <div class="file-info" id="file-info">
                    <strong>üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª:</strong> <span id="file-name"></span>
                    <div class="file-stats" id="file-stats"></div>
                </div>
                
                <textarea id="resume-text" placeholder="–ò–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Ä–µ–∑—é–º–µ –∑–¥–µ—Å—å..."></textarea>
                
                <div class="notification" id="notification"></div>
                <button id="analyze-btn" class="btn">–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—é–º–µ</button>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—é–º–µ —Å –ø–æ–º–æ—â—å—é YandexGPT...</p>
                </div>
            </div>
            
            <div class="output-section">
                <h2 class="section-title">–ò–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                <div class="result-container" id="result-container">
                    <p>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—é–º–µ.</p>
                </div>
            </div>
        </section>
        
        <section id="features">
            <h2 class="section-title" style="text-align: center;">–ß—Ç–æ –º—ã –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ —Ä–µ–∑—é–º–µ</h2>
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">üë®‚Äçüéì</div>
                    <h3>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
                    <p>–£—á–µ–±–Ω—ã–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–æ–¥—ã –æ–±—É—á–µ–Ω–∏—è</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíº</div>
                    <h3>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h3>
                    <p>–ú–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã, –¥–æ–ª–∂–Ω–æ—Å—Ç–∏, –ø–µ—Ä–∏–æ–¥—ã, –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üõ†Ô∏è</div>
                    <h3>–ù–∞–≤—ã–∫–∏</h3>
                    <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìû</div>
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <p>–¢–µ–ª–µ—Ñ–æ–Ω, email, —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏</p>
                </div>
            </div>
        </section>
        
        <section id="about" style="margin-top: 40px;">
            <h2 class="section-title">–û –ø—Ä–æ–µ–∫—Ç–µ</h2>
            <p>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç YandexGPT –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—é–º–µ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç HR-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º —ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –∏ –±—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.</p>
            <p>–ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç–µ PDF-—Ñ–∞–π–ª, —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Ä–µ–∑—é–º–µ, –∏ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–∏—Ç –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏: –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã, –Ω–∞–≤—ã–∫–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.</p>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p>HR Resume Analyzer &copy; 2025 | –£–ø—Ä–æ—â–∞–µ–º —Ä–∞–±–æ—Ç—É HR-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</p>
        </div>
    </footer>

    <script>
        // URL Cloud Function (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω)
        const CLOUD_FUNCTION_URL = 'https://functions.yandexcloud.net/d4eudmm1qr4smp94v6ts';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        document.addEventListener('DOMContentLoaded', function() {
            const analyzeBtn = document.getElementById('analyze-btn');
            const resumeText = document.getElementById('resume-text');
            const resultContainer = document.getElementById('result-container');
            const loading = document.getElementById('loading');
            const fileInput = document.getElementById('file-input');
            const pdfInput = document.getElementById('pdf-input');
            const fileName = document.getElementById('file-name');
            const fileInfo = document.getElementById('file-info');
            const fileStats = document.getElementById('file-stats');
            const pdfPreview = document.getElementById('pdf-preview');
            const pdfInfo = document.getElementById('pdf-info');
            const pdfLoading = document.getElementById('pdf-loading');
            const notification = document.getElementById('notification');
            const clearAllBtn = document.getElementById('clear-all');

            let currentFileType = null;

            // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π
            clearAllBtn.addEventListener('click', function() {
                resumeText.value = '';
                fileInput.value = '';
                pdfInput.value = '';
                fileInfo.style.display = 'none';
                pdfPreview.classList.remove('active');
                pdfLoading.style.display = 'none';
                currentFileType = null;
                showNotification('–í—Å–µ –ø–æ–ª—è –æ—á–∏—â–µ–Ω—ã', 'success');
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ TXT —Ñ–∞–π–ª–∞
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;

                currentFileType = 'txt';
                pdfInput.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º PDF input
                pdfPreview.classList.remove('active');

                if (file.type === 'text/plain') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        resumeText.value = e.target.result;
                        fileName.textContent = file.name;
                        fileStats.textContent = `–†–∞–∑–º–µ—Ä: ${(file.size / 1024).toFixed(2)} KB, –°–∏–º–≤–æ–ª–æ–≤: ${e.target.result.length}`;
                        fileInfo.style.display = 'block';
                        showNotification('–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
                    };
                    reader.readAsText(file);
                } else {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª (.txt)', 'error');
                    fileInput.value = '';
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ PDF —Ñ–∞–π–ª–∞
            pdfInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;

                currentFileType = 'pdf';
                fileInput.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º TXT input
                fileInfo.style.display = 'none';
                
                if (file.type === 'application/pdf') {
                    fileName.textContent = file.name;
                    pdfInfo.textContent = `–§–∞–π–ª: ${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
                    pdfPreview.classList.add('active');
                    pdfLoading.style.display = 'block';
                    
                    extractTextFromPDF(file);
                } else {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª', 'error');
                    pdfInput.value = '';
                }
            });

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF
            async function extractTextFromPDF(file) {
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    
                    let fullText = '';
                    const pageCount = pdf.numPages;
                    
                    // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
                    for (let pageNum = 1; pageNum <= pageCount; pageNum++) {
                        const page = await pdf.getPage(pageNum);
                        const textContent = await page.getTextContent();
                        const pageText = textContent.items.map(item => item.str).join(' ');
                        fullText += pageText + '\n\n';
                    }
                    
                    resumeText.value = fullText;
                    pdfInfo.innerHTML = `
                        –§–∞–π–ª: ${file.name}<br>
                        –†–∞–∑–º–µ—Ä: ${(file.size / 1024).toFixed(2)} KB<br>
                        –°—Ç—Ä–∞–Ω–∏—Ü: ${pageCount}<br>
                        –°–∏–º–≤–æ–ª–æ–≤: ${fullText.length}
                    `;
                    
                    pdfLoading.style.display = 'none';
                    showNotification(`PDF —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω (${pageCount} —Å—Ç—Ä–∞–Ω–∏—Ü)`, 'success');
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ PDF:', error);
                    pdfLoading.style.display = 'none';
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ PDF —Ñ–∞–π–ª–∞', 'error');
                    pdfPreview.classList.remove('active');
                }
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—é–º–µ
            analyzeBtn.addEventListener('click', async function() {
                const text = resumeText.value.trim();
                
                if (!text) {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–µ–∑—é–º–µ', 'error');
                    return;
                }

                if (text.length < 50) {
                    showNotification('–¢–µ–∫—Å—Ç —Ä–µ–∑—é–º–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π', 'error');
                    return;
                }
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                loading.style.display = 'block';
                analyzeBtn.disabled = true;
                
                try {
                    const result = await analyzeResumeWithCloudFunction(text);
                    
                    if (result.success) {
                        displayResults(result.data);
                        showNotification('–†–µ–∑—é–º–µ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é YandexGPT', 'success');
                    } else {
                        throw new Error(result.error);
                    }
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∑—é–º–µ:', error);
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∑—é–º–µ: ' + error.message, 'error');
                } finally {
                    // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    loading.style.display = 'none';
                    analyzeBtn.disabled = false;
                }
            });
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—é–º–µ —á–µ—Ä–µ–∑ Cloud Function
            async function analyzeResumeWithCloudFunction(resumeText) {
                try {
                    const response = await fetch(CLOUD_FUNCTION_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            text: resumeText
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                    
                } catch (fetchError) {
                    console.error('–û—à–∏–±–∫–∞ fetch:', fetchError);
                    return {
                        success: false,
                        error: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É: " + fetchError.message
                    };
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            function displayResults(data) {
                let html = '';
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç YandexGPT
                if (data.result && data.result.alternatives && data.result.alternatives[0]) {
                    const aiResponse = data.result.alternatives[0].message.text;
                    
                    try {
                        // –ü—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞ AI
                        let jsonText = aiResponse;
                        
                        // –û—á–∏—â–∞–µ–º –æ—Ç markdown –æ–±–µ—Ä—Ç–æ–∫
                        if (aiResponse.includes('```json')) {
                            jsonText = aiResponse.split('```json')[1].split('```')[0].trim();
                        } else if (aiResponse.includes('```')) {
                            jsonText = aiResponse.split('```')[1].split('```')[0].trim();
                        }
                        
                        const parsedData = JSON.parse(jsonText);
                        
                        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                        if (parsedData.education) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
                                    <div class="result-content">${parsedData.education}</div>
                                </div>
                            `;
                        }
                        
                        if (parsedData.experience && parsedData.experience.length > 0) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üíº –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="result-content">
                                        <ul>
                                            ${parsedData.experience.map(exp => `<li>${exp}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `;
                        }
                        
                        if (parsedData.skills) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üõ†Ô∏è –ù–∞–≤—ã–∫–∏</div>
                                    <div class="result-content">${parsedData.skills}</div>
                                </div>
                            `;
                        }
                        
                        if (parsedData.contacts) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                                    <div class="result-content">${parsedData.contacts}</div>
                                </div>
                            `;
                        }
                        
                        if (parsedData.languages) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üåê –Ø–∑—ã–∫–∏</div>
                                    <div class="result-content">${parsedData.languages}</div>
                                </div>
                            `;
                        }
                        
                        if (parsedData.summary) {
                            html += `
                                <div class="result-item">
                                    <div class="result-title">üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ</div>
                                    <div class="result-content">${parsedData.summary}</div>
                                </div>
                            `;
                        }
                        
                    } catch (parseError) {
                        // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º raw –æ—Ç–≤–µ—Ç
                        html = `
                            <div class="result-item">
                                <div class="result-title">–û—Ç–≤–µ—Ç –æ—Ç YandexGPT</div>
                                <div class="result-content"><pre>${aiResponse}</pre></div>
                            </div>
                        `;
                    }
                } else {
                    html = '<p>–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞</p>';
                }
                
                resultContainer.innerHTML = html;
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            function showNotification(message, type) {
                notification.textContent = message;
                notification.className = 'notification ' + type;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–æ–º —Ä–µ–∑—é–º–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            resumeText.value = `–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á

–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67
Email: ivanov@example.com
–ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞

–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
2015-2019: –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –§–∞–∫—É–ª—å—Ç–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –∏ –∫–∏–±–µ—Ä–Ω–µ—Ç–∏–∫–∏, –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞

–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:
2019-2021: –û–û–û "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±—É–¥—É—â–µ–≥–æ", –î–æ–ª–∂–Ω–æ—Å—Ç—å: Junior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Python –∏ JavaScript
- –£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ –∫–æ–¥–∞

2021-2023: –û–û–û "–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è", –î–æ–ª–∂–Ω–æ—Å—Ç—å: Middle —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ React
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–∞ Node.js
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–ù–∞–≤—ã–∫–∏:
- –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: Python, JavaScript, TypeScript
- –§—Ä–µ–π–º–≤–æ—Ä–∫–∏: React, Node.js, Express
- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: PostgreSQL, MongoDB
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Git, Docker, Webpack

–Ø–∑—ã–∫–∏:
- –†—É—Å—Å–∫–∏–π: —Ä–æ–¥–Ω–æ–π
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–π: —É—Ä–æ–≤–µ–Ω—å B2 (—Å—Ä–µ–¥–Ω–µ-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)`;
        });
    </script>
</body>

</html>
